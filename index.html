<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>OSCER Bingo Card Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      width: 80%;
      max-width: 600px;
    }
    th, td {
      border: 1px solid #333;
      padding: 10px;
      font-size: 16px;
      min-width: 60px;
    }
    th {
      background-color: #ddd;
    }
    .free-space {
      background-color: #ffeb3b;
      font-weight: bold;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-bottom: 20px;
    }
  </style>
</head>
<body>
  <h1>OSCER Bingo Card Generator</h1>
  <button onclick="generateBingoCard()">Generate New Card</button>
  <table id="bingo-table">
    <thead>
      <tr>
        <th>O</th>
        <th>S</th>
        <th>C</th>
        <th>E</th>
        <th>R</th>
      </tr>
    </thead>
    <tbody>
      <!-- Bingo card cells go here -->
    </tbody>
  </table>

  <script>
    // Full dataset extracted from the CSV file
    const tier1 = [ // "Definitely Going to Happen" (Weight: 3)
      "Hank is here!",
      "Craft services rebrand (Chaplin's, etc.)",
      "Gregg holds a VHS cassette",
      "Joe Estevez is here!",
      "Gregg has information from an Oscars insider"
    ];
    const tier2 = [ // "Could Happen" (Weight: 2)
      '"Celebrity" guest interview',
      "Cutaway: Peter Jackson photo",
      "Cutaway: Steven Spielberg photo",
      "Cutaway: Woody Allen photo",
      "Dekkar/DKR perform"
    ];
    const tier3 = [ // "Unlikely but Plausible" (Weight: 1)
      "Gregg is in legal trouble",
      "A new season of Decker is announced",
      "Dr. San resurrection",
      "Donald Trump is referenced",
      "Tim takes the Lord's name in vain"
    ];

    // Build a weighted selection pool
    function buildWeightedPool() {
      const pool = [];
      tier1.forEach(option => pool.push(...Array(3).fill(option))); // Weight 3
      tier2.forEach(option => pool.push(...Array(2).fill(option))); // Weight 2
      tier3.forEach(option => pool.push(option)); // Weight 1
      return pool;
    }

    // Select 24 unique items from the weighted pool
    function weightedSelect(count) {
      let pool = buildWeightedPool();
      const result = [];
      while (result.length < count && pool.length > 0) {
        const idx = Math.floor(Math.random() * pool.length);
        const selected = pool[idx];
        pool = pool.filter(item => item !== selected); // Remove all occurrences
        result.push(selected);
      }
      return result;
    }

    // Generate a 5x5 bingo card (center is the popcorn emoji üçø)
    function generateBingoCard() {
      const tbody = document.querySelector("#bingo-table tbody");
      tbody.innerHTML = "";
      const totalCells = 25;
      const numItems = totalCells - 1; // Center space reserved
      const items = weightedSelect(numItems);
      let itemIndex = 0;
      for (let row = 0; row < 5; row++) {
        const tr = document.createElement("tr");
        for (let col = 0; col < 5; col++) {
          const td = document.createElement("td");
          if (row === 2 && col === 2) {
            td.textContent = "üçø"; // Free space
            td.classList.add("free-space");
          } else {
            td.textContent = items[itemIndex] || "";
            itemIndex++;
          }
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      }
    }

    document.addEventListener("DOMContentLoaded", generateBingoCard);
  </script>
</body>
</html>