<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OSCER Bingo Card Generator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 20px;
      background-color: #f4f4f4;
    }
    h1 {
      margin-top: 20px;
      font-size: 24px;
    }
    button {
      padding: 12px 20px;
      font-size: 16px;
      margin: 20px;
      border: none;
      background-color: #ff5722;
      color: white;
      cursor: pointer;
      border-radius: 5px;
      transition: background 0.3s;
    }
    button:hover {
      background-color: #e64a19;
    }
    table {
      margin: 20px auto;
      border-collapse: collapse;
      width: 90%;
      max-width: 500px;
      background-color: white;
      box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
    }
    th, td {
      border: 2px solid #333;
      padding: 12px;
      text-align: center;
      font-size: 14px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    th {
      background-color: #ffeb3b;
      font-weight: bold;
    }
    td {
      background-color: white;
    }
    td.free-space {
      background-color: #ffeb3b;
      font-weight: bold;
    }
    td.marked {
      background-color: #4caf50 !important;
      color: white !important;
      text-decoration: line-through;
    }
    @media (max-width: 600px) {
      table {
        width: 100%;
      }
      th, td {
        font-size: 12px;
        padding: 8px;
      }
      button {
        font-size: 14px;
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <h1>OSCER Bingo Card Generator</h1>
  <button onclick="generateBingoCard()">Generate New Card</button>
  <table id="bingo-table">
    <thead>
      <tr>
        <th>O</th>
        <th>S</th>
        <th>C</th>
        <th>E</th>
        <th>R</th>
      </tr>
    </thead>
    <tbody>
      <!-- Bingo card cells go here -->
    </tbody>
  </table>

  <script>
    // Full dataset extracted from the CSV file
    const tier1 = [
      "Hank is here!",
      "Craft services rebrand (Chaplin's, etc.)",
      "Gregg holds a VHS cassette",
      "Joe Estevez is here!",
      "Gregg has information from an Oscars insider",
      "Mark does an impression",
      "BABOONS: A PEP BOYS STORY is granted additional funding",
      "Cutaway: Steven Spielberg photo",
      "Tim takes the Lord's name in vain",
      "Tim announces Dekkar/DKR 5.0"
    ];
    
    const tier2 = [
      '"Celebrity" guest interview',
      "Cutaway: Peter Jackson photo",
      "Cutaway: Woody Allen photo",
      "Dekkar/DKR perform",
      "Gregg mentions Bogart or John Wayne",
      "A reference to Tim‚Äôs skin cancer",
      "A ‚ÄúLIVE via satellite‚Äù guest appears",
      "Tim and Gregg discuss AI",
      "Gregg refers to his book or video series",
      "A new editing or camera error is introduced"
    ];

    const tier3 = [
      "Gregg is in legal trouble",
      "A new season of Decker is announced",
      "Dr. San resurrection",
      "Donald Trump is referenced",
      "Tim criticizes vaccines",
      "Someone appears who was previously banned",
      "Gregg questions the integrity of a movie‚Äôs Oscars win",
      "Manuel is here!",
      "Tim talks about his kids",
      "A past joke segment is revived"
    ];

    // Build a weighted selection pool
    function buildWeightedPool() {
      const pool = [];
      tier1.forEach(option => pool.push(...Array(3).fill(option))); // Weight 3
      tier2.forEach(option => pool.push(...Array(2).fill(option))); // Weight 2
      tier3.forEach(option => pool.push(option)); // Weight 1
      return pool;
    }

    // Select 24 unique items from the weighted pool
    function weightedSelect(count) {
      let pool = buildWeightedPool();
      const result = [];
      while (result.length < count && pool.length > 0) {
        const idx = Math.floor(Math.random() * pool.length);
        const selected = pool[idx];
        pool = pool.filter(item => item !== selected); // Remove all occurrences
        result.push(selected);
      }
      return result;
    }

    // Generate a 5x5 bingo card (center is the popcorn emoji üçø)
    function generateBingoCard() {
      const tbody = document.querySelector("#bingo-table tbody");
      tbody.innerHTML = "";
      const totalCells = 25;
      const numItems = totalCells - 1; // Center space reserved
      const items = weightedSelect(numItems);
      let itemIndex = 0;
      for (let row = 0; row < 5; row++) {
        const tr = document.createElement("tr");
        for (let col = 0; col < 5; col++) {
          const td = document.createElement("td");
          td.onclick = () => td.classList.toggle("marked");
          if (row === 2 && col === 2) {
            td.textContent = "üçø"; // Free space
            td.classList.add("free-space");
          } else {
            td.textContent = items[itemIndex] || "";
            itemIndex++;
          }
          tr.appendChild(td);
        }
        tbody.appendChild(tr);
      }
    }

    document.addEventListener("DOMContentLoaded", generateBingoCard);
  </script>
</body>
</html>